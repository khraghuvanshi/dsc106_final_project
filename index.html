<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The Metabolic Mystery: Solving Your Body's Glucose Puzzle</title>
    <link rel="stylesheet" href="style.css" />
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://unpkg.com/scrollama"></script>
    <script src="glucose_spike.js" type="module"></script>
    <script src="script.js" type="module"></script>
    <script src="main.js" type="module"></script>
  </head>
  <body>
    <!-- Full-width title div -->
    <div class="full-width-title">
      <button id="toggleNightMode">ðŸŒ™ Night Mode</button>
      <h1>The Metabolic Mystery: Solving Your Body's Glucose Puzzle</h1>
    </div>

    <div class="container">
      <div class="content-column">
        <section class="step" id="step-0">
          <div class="step-content">
            <h2>Welcome!</h2>
            <p>
              Are you hungry? What are you craving? Is it a bowl of pasta? 
              A sandwich? Salad? After sitting down for a meal, what happens
              next inside your body? Scroll down to explore how different 
              meals affect glucose levels in real-time!
            </p>
          </div>
        </section>

        <section class="step" id="step-1">
          <div class="step-content">
            <h2>Why Should You Care?</h2>
            <p>
              According to the CDC, <strong>1 in 10</strong> in America have
              diabetes. This means that in any given group of 10, at least one person
              is affected. Understanding glucose levels is crucial for
              maintaining long-term health.
            </p>
          </div>
        </section>

        <section class="step" id="step-2">
          <div class="step-content">
            <h2>Understanding the Data</h2>
            <p>
              We conducted an exploratory data analysis (EDA) to clean and
              structure the CGMacros dataset, which contains continuous glucose
              monitoring (CGM) readings, meal compositions, and participant
              health metrics.
            </p>
          </div>
        </section>

        <section class="step" id="step-3">
          <div class="step-content">
            <h2>Meal Points</h2>
            <p>
              Each point on the graph represents a meal. The y-axis shows
              glucose levels measured in mg/dL, while the x-axis represents
              time. Hover over meal points to see detailed nutritional
              information.
            </p>
          </div>
        </section>

        <section class="step" id="step-4">
          <div class="step-content">
            <h2>Glucose Timeline</h2>
            <p>
              The lines connecting meal points show how glucose levels change
              over time. Notice how different meal compositions can lead to
              varying glucose responses.
            </p>
            <div class="control-panel">
              <select id="participantDropdown"></select>
            </div>
          </div>
        </section>

        <section class="step" id="step-5">
          <div class="step-content">
            <h2>Explore the Data</h2>
            <p>
              In this section, you can explore how your diet may impact your overall health, specifically whether you might be at risk for diabetes. 
              The data visualization shows clusters based on real-world data of macro-nutrient consumption and glucose responses, helping us categorize different dietary patterns.
            </p>
            <p>
              By entering your own macro-nutrient consumption (carbs, protein, fat, and fiber), weâ€™ll predict which category you are likely to fall into: Healthy, Pre-diabetic, or Diabetic. This prediction is based on where your diet places you within the clusters.
            </p>
            <p>
              Try entering your current diet details below and see what your predicted health status might be based on your macro-nutrient intake!
            </p>

            <div class="input-container">
              <label
                >Carbs (g): <input type="number" id="carbs" value="50"
              /></label>
              <label
                >Protein (g): <input type="number" id="protein" value="20"
              /></label>
              <label
                >Fat (g): <input type="number" id="fat" value="10"
              /></label>
              <label
                >Fiber (g): <input type="number" id="fiber" value="5"
              /></label>
              <button onclick="addUserData()">Check Classification</button>
            </div>
          </div>
        </section>

        <section class="step" id="step-6">
          <div class="step-content">
            <h2>Different metabolic responses based on health conditions</h2>
            <p>
              Diabetics experience significantly higher and longer-lasting 
              glucose spikes compared to healthy individuals. The interaction 
              shows that healthy individuals experience a small spike after 
              eating but their glucose levels stabilize relatively quickly. 
              In contrast, prediabetics experience a moderate glucose rise, 
              with levels continuing to increase beyond the one-hour mark, 
              suggesting early signs of insulin resistance. Diabetics are even
              worse with the highest spike. Their glucose levels continue to 
              rise sharply after an hour, showing a reduced ability to regulate 
              blood sugar effectively due to insulin dysfunction. 
            </p>
          </div>
        </section>

        <section class="step" id="step-7">
          <div class="step-content">
            <h2>Pre-meal glucose matters!</h2>
            <p>
              If pre-meal glucose is already high, the spike is amplified 
              significantly. This pattern mirrors the real-world data where 
              diabetics often start with elevated fasting glucose due to 
              insulin resistance. The higher the starting glucose, the more 
              difficult it is for the body to regulate post-meal spikes, 
              increasing the risk of long-term metabolic complications

            </p>
          </div>
        </section>

        <section class="step" id="step-8">
          <div class="step-content">
            <h2>Not all macronutrients affect blood sugar equally</h2>
            <p>
              Carbohydrates cause the most significant glucose spikes, 
              reinforcing the importance of carb management. This is evident 
              in the visualization where meals higher in carbs lead to a 
              steeper glucose rise, especially in diabetics. In contrast, 
              protein and fat have a more subtle effect as they slow digestion 
              and contribute to a gradual increase in glucose levels rather 
              than a sharp spike. Additionally, BMI plays a role, as individuals 
              with higher BMI levels often exhibit greater insulin resistance, 
              leading to higher and more prolonged glucose elevations. 
            </p>
          </div>
        </section>

        <section class="step" id="step-9">
          <div class="step-content">
            <h2>Glucose Spike Visualization: Experiment with your diet!</h2>
            <p>
              This glucose spike visualization allows user to experiment with 
              different dietary choices and see how their glucose levels 
              respond in real-time. By adjusting the BMI, carbohydrate intake, 
              and other macronutrients, users can observe how different foods 
              impact glucose spikes. Scroll more for further details!
            </p>
          </div>
        </section>

        <section class="step" id="step-10">
          <div class="step-content">
              <h2>Glucose Spike Predictor</h2>
              <p>
                  Each point on the graph represents a meal. The y-axis shows glucose levels measured in mg/dL, 
                  while the x-axis represents time. Hover over meal points to see detailed nutritional information.
              </p>
              
              <p><strong>Try adjusting BMI and carb intake</strong> to see how glucose spikes 
                  differ for healthy, prediabetic, and diabetic individuals!</p>
      
              <p><strong>Try increasing the pre-meal glucose slider</strong> and observing how it 
                  affects 1-hour and 2-hour glucose levels! Notice how a high pre-meal glucose amplifies the spike.</p>
      
              <p><strong>Try increasing the carbs</strong> and observe how glucose spikes rise 
                  sharply, especially for diabetics.</p>
      
              <p><strong>Now, adjust the protein and fat intake</strong> to see how they slow digestion 
                  and cause a more gradual glucose increase.</p>
      
              <p><strong>Try experimenting with different BMI levels</strong> to see how insulin 
                  resistance affects post-meal glucose clearance.</p>
      
              <!-- Pre-Meal Glucose Input -->
              <div class="input-group">
                  <label for="preMealGlucose">Pre-Meal Glucose (mg/dL): <span id="preMealGlucoseValue">90</span></label>
                  <input type="range" id="preMealGlucose" min="70" max="150" step="1" value="90"/>
              </div>
      
              <!-- Sliders for user input -->
              <div class="input-group">
                  <label for="bmi">BMI: <span id="bmiValue">25</span></label>
                  <input type="range" id="bmi" min="15" max="40" step="1" value="25"/>
              </div>
      
              <div class="input-group">
                  <label for="carbs">Carbs (grams): <span id="carbsValue">100</span></label>
                  <input type="range" id="carbs-spike" min="0" max="300" step="10" value="100"/>
              </div>
      
              <div class="input-group">
                  <label for="protein">Protein (grams): <span id="proteinValue">50</span></label>
                  <input type="range" id="protein-spike" min="0" max="150" step="5" value="50"/>
              </div>
      
              <div class="input-group">
                  <label for="fat">Fat (grams): <span id="fatValue">30</span></label>
                  <input type="range" id="fat-spike" min="0" max="100" step="5" value="30"/>
              </div>
      
          </div>
      </section>

      <section class="step" id="step-11">
        <div class="step-content">
          <h2>Conclusion</h2>
          <p>
            Diet plays a crucial role in glucose stability, and even small 
            shifts in macronutrient intake can significantly influence diabetes
            risk. Our visualization matters because it transforms complex 
            metabolic responses into an interactive experience, allowing users 
            to see how their dietary choices impact glucose levels in real 
            time. By experimenting with different nutrient compositions, 
            users gain a deeper understanding of their body's response to food, 
            empowering them to make informed decisions for long-term metabolic 
            health.
          </p>
        </div>
      </section>

      </div>

      <div class="vis-column">
        <div id="chart-container">
          <svg id="glucoseChart" width="700" height="500"></svg>
          <div class="tooltip"></div>
        </div>
      </div>
    </div>
  </body>
</html>
